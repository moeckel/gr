<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Gr by moeckel</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>GR</h1>
          <h2>Gradual rasterization tool</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/moeckel/gr/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/moeckel/gr/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/moeckel/gr" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h3>
<a name="welcome-to-github-pages" class="anchor" href="#welcome-to-github-pages"><span class="octicon octicon-link"></span></a>Introduction</h3>

<p>This website provides the open-source package to create gradual rastercells. An early description of this methodology was published as a conference paper at the Annual Meeting of the Transportation Research Board:</p>
<p class="highlight">Moeckel, R., Donnelly, R. (2014) Gradual Rasterization: Redefining the spatial resolution in transport modeling. In: Proceedings of the 93rd Annual Meeting of the Transportation Research Board (TRB). Washington, D.C. January 12-16, 2014. [<a href="http://moeckel.github.io/rm/doc/2014_moeckel_donnelly_trb.pdf">Download</a>]<br>
</p>
<p><img src="images/nwGaZones.png" width="306" height="226" alt="Zones in northwest Georgia"/>&nbsp;<img src="images/nwGaRaster.png" width="306" height="226" alt="Raster cells in northwest Georgia"/></p>
<p><em><center>Figure 1: Zones (left) and raster cells (right) in Northwest Georgia</center></em></p>
<p>A largely revised version is currently under review for publication in <a href="http://www.envplan.com/B.html">Environment and Planning&nbsp;B</a>. </p>

<h3>
<a name="designer-templates" class="anchor" href="#designer-templates"><span class="octicon octicon-link"></span></a>Contents</h3>

<p>The deliverable that can be downloaded at the top of this page contains a compiled executable called rasterizeI75.exe (for PC only). Three subdirectories are included:</p>
<ul>
  <li> <strong>/code/</strong> In this directory, you find the Fortran source code. It has been compiled with ï»¿Intel(R) Visual Fortran Composer XE 2013 SP1 to create the executable (rasterizeI75.exe). This code is not needed to run the model, but has been provided to enable programmers to understand every step of the model. </li>
  <li>
<strong>/data/</strong> This directory has all input data that is read by the program (rasterizeI75.exe). The program also writes additional files to this directory while running. </li>
<li>
<strong>/shp/</strong> This directory provides a shapefile of zones in the Geogia study area. </li>
</ul>
<p><br>
  After unzipping the executable and the the two directories /data and /shp (unzipping the directory /code is optional), open a command prompt window, navigate to the directory where these files were saved and open rasterizeI75.exe. The model will run through a series of steps to create a raster zone system and to disaggregate auto and truck flows of the Georgia Statewide Transportation Model from model zones to raster cells. </p>
<h3>Modeling steps
</h3>
<p>The modeling steps are listed below. Note that the model takes a fairly long time to run initially while it creates intermediate output files (7 hours on a 3 GHz processor). Several of those files are greater than 100 MB, and therefore, could not be uploaded to github. </p>
<p>After the model completed these steps once, selected 'if statements' in the code can be set from .true. to .false. This allows skipping complex data processing and reading intermediate files instead, reducing the runtime substantially in subsequent model runs (to ca. 20 min on a 3 GHz processor, compiled in file rasterizeI75_quick.exe). In this quick version, steps A.1 and B.3 were turned off. The program&nbsp;rasterizeI75_quick.exe only runs after the program&nbsp;rasterizeI75.exe has been executed at least once.</p>
<table border="0" cellspacing="0" cellpadding="0">
  <tr>
    <th align="left" scope="col">Step</th>
    <th align="left" scope="col">Description</th>
    <th colspan="2" align="left" scope="col">Possible to skip*</th>
  </tr>
  <tr>
    <th align="left" scope="row">A</th>
    <td align="left">Create gradual raster cells</td>
    <td align="left">Yes</td>
    <td align="left">rasterizeI75.for:&nbsp;Line&nbsp;25</td>
  </tr>
  <tr>
    <th align="left" scope="row">A.1</th>
    <td align="left">Create finest raster cell system (250 x 250 meters)</td>
    <td align="left">Yes</td>
    <td align="left">rasterizeI75.for:&nbsp;Line&nbsp;207</td>
  </tr>
  <tr>
    <th align="left" scope="row">A.2</th>
    <td align="left">Allocate socio-economic data proportionally to raster cells</td>
    <td align="left">No</td>
    <td align="left">rasterizeI75.for:&nbsp;Line&nbsp;285</td>
  </tr>
  <tr>
    <th align="left" scope="row">A.3</th>
    <td align="left">Start with single raster cell that covers the entire study area and successively split into four smaller zones until an exogenously given threshold value is reached for every raster cell</td>
    <td align="left">No</td>
    <td align="left">rasterizeI75.for:&nbsp;Line&nbsp;392</td>
  </tr>
  <tr>
    <th align="left" scope="row">A.4</th>
    <td align="left">Write ungenerate file that can be converted into a shapefile by Arc/GIS</td>
    <td align="left">No</td>
    <td align="left">rasterizeI75.for:&nbsp;Line&nbsp;544</td>
  </tr>
  <tr>
    <th align="left" scope="row">B</th>
    <td align="left">Disaggregate trips from zones to raster cells</td>
    <td align="left">Yes</td>
    <td align="left">rasterizeI75.for:&nbsp;Line&nbsp;59</td>
  </tr>
  <tr>
    <th align="left" scope="row">B.1</th>
    <td align="left">Read gradual raster cells (output of step A.3)</td>
    <td align="left">No</td>
    <td align="left">rasterizeI75.for:&nbsp;Line&nbsp;529</td>
  </tr>
  <tr>
    <th align="left" scope="row">B.2</th>
    <td align="left">Read zonal trip tables of Georgia statewide model</td>
    <td align="left">No</td>
    <td align="left">rasterizeI75data.for:&nbsp;Line&nbsp;130</td>
  </tr>
  <tr>
    <th align="left" scope="row">B.3</th>
    <td align="left">Within the Atlanta metropolitan area, disaggregate trips from Georgia statewide model zones to trips by urban model zones</td>
    <td align="left">Yes</td>
    <td align="left">rasterizeI75.for: Line 636</td>
  </tr>
  <tr>
    <th align="left" scope="row">B.4</th>
    <td align="left">Disaggregate zonal trip tables to raster-cell trip tables</td>
    <td align="left">No</td>
    <td align="left">rasterizeI75.for: Line 581</td>
  </tr>
  </table>
  <h6>*Step may only be skipped after the model has run once and written out intermediate files.</h6>
<p></p>
<h3>
<a name="authors-and-contributors" class="anchor" href="#authors-and-contributors"><span class="octicon octicon-link"></span></a>Authors and Contributors</h3>

<p>The model was designed by Rick Donnelly (<a href="http://pbworld.com">Parsons Brinckerhoff</a>, Inc.) and Rolf Moeckel (formerly Parsons Brinckerhoff, now <a href="http://umd.edu">University of Maryland</a>). The code was written by Rolf Moeckel.</p>

<h3>
<a name="support-or-contact" class="anchor" href="#support-or-contact"><span class="octicon octicon-link"></span></a>Support or Contact</h3>

<p>Having trouble getting this model to work? Please contact Rolf Moeckel at moeckel [at] umd.edu for support.</p>
        </section>

        <footer>
          GR is maintained by <a href="https://github.com/moeckel">moeckel</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>